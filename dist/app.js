!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Component=function(){function e(){r(this,e)}return o(e,[{key:"_getIcons",value:function(e){for(var t="",n=e.length-1;n>=0;n--){var r="";e[n].id>=800&&e[n].id<=803&&(e[n].icon.endsWith("n")&&(r="-night"),e[n].icon.endsWith("d")&&(r="-day")),t+='<i class="wi wi-owm'+r+"-"+e[n].id+'"title="'+e[n].main+": "+e[n].description+'"></i>'}return t}},{key:"_requestUpdate",value:function(e){var t=new CustomEvent("needUpdate",{bubbles:!0,detail:{city:e}});this._outlet.dispatchEvent(t)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.units=void 0;var r=n(3),o=n(5),i=n(6),u=n(7),a=n(8),c=new o.Weather({outlet:document.querySelector("[data-weather]"),template:document.querySelector("[data-weather] > template")}),l=new i.Forecast({outlet:document.querySelector("[data-forecast]"),template:document.querySelector("[data-forecast] > template")}),s=new u.List({outlet:document.querySelector("[data-history]"),template:document.querySelector("[data-history] > template"),localStorageKey:"history",clearButton:document.querySelector("[data-history-clear]")});s.init();var f=new u.List({outlet:document.querySelector("[data-favourites]"),template:document.querySelector("[data-favourites] > template"),localStorageKey:"favourites",clearButton:document.querySelector("[data-favourites-clear]")});f.init(),(t.units=new a.Units({localStorageKey:"units",toggleButton:document.querySelector("[data-units-toggle]")})).init();var p=new r.App,y=function(e){return p.getAll(e).then(function(){c.init(p.responseWeather),l.init(p.responseForecast)})};document.addEventListener("needUpdate",function(e){y(e.detail.city)}),y();var h=document.querySelector("[data-search]"),d=h.querySelector("input");h.onsubmit=function(){return y(h.elements.cityName.value).then(function(){d.value=p.city,s.add(p.city)},function(e){d.style.background="#ffd3d3",d.oninput=function(){return d.removeAttribute("style")},console.error(e)}),!1},document.querySelector("[data-favourites-add]").onclick=function(){f.add(p.city)},console.log(p)},function(e,t,n){n(1),e.exports=n(9)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),u=n(1);t.App=function(){function e(t){r(this,e),this.city=this._getCityFromUrl()||"kyiv",this.responseWeather=null,this.responseForecast=null}return o(e,[{key:"getAll",value:function(e){var t=this;return this._getWeather("weather",e).then(function(){return t._getWeather("forecast")})}},{key:"_getWeather",value:function(e,t){var n=this;return t||(t=this.city),(0,i.get)(e,u.units.value,t).then(function(t){"weather"===e?(n.responseWeather=t,n._setCityConfig(),n._updateUrl(),n._setCityTitle()):"forecast"===e&&(n.responseForecast=t)})}},{key:"_getCityFromUrl",value:function(){var e=new URL(window.location.href);if(e.search.startsWith("?q="))return e.search.slice(3)}},{key:"_updateUrl",value:function(){window.history.pushState(null,null,"?q="+this.city)}},{key:"_setCityConfig",value:function(){this.city=this.responseWeather.name+","+this.responseWeather.sys.country}},{key:"_setCityTitle",value:function(){var e="Weather App - "+this.city;document.title!==e&&(document.title=e)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.get=function(e,t,n){var r="https://api.openweathermap.org/data/2.5/"+e+"?q="+n+"&APPID=40c8d4e755a53b1d45a970fc3769eeeb&units="+t+"&cnt=8";return fetch(r).then(function(e){if(e.ok)return e.json();throw new Error("api response was not ok.")})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Weather=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);t.Weather=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._outlet=e.outlet,n._template=e.template,n}return i(t,e),u(t,[{key:"init",value:function(e){this._outlet.innerHTML="";var t=document.importNode(this._template.content,!0),n=this._getIcons(e.weather);t.querySelector("[data-city]").textContent=e.name+","+e.sys.country,t.querySelector("[data-icon]").insertAdjacentHTML("beforeend",n),t.querySelector("[data-temp]").textContent=e.main.temp.toFixed(0)+"°",this._outlet.appendChild(t)}}]),t}(a.Component)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Forecast=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);t.Forecast=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._outlet=e.outlet,n._template=e.template,n}return i(t,e),u(t,[{key:"init",value:function(e){this._outlet.innerHTML="";for(var t=document.importNode(this._template.content,!0),n=0;n<e.list.length;n++){var r=this._getHours(e.list[n].dt),o=this._getIcons(e.list[n].weather),i=t.cloneNode(!0);i.querySelector("[data-time]").textContent=r;i.querySelector("[data-icon]").insertAdjacentHTML("beforeend",o);i.querySelector("[data-temp]").textContent=e.list[n].main.temp.toFixed(0)+"°",this._outlet.appendChild(i)}}},{key:"_getHours",value:function(e){return new Date(1e3*e).getHours().toString().padStart(2,"0")}}]),t}(a.Component)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);t.List=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._list=[],n._outlet=e.outlet,n._template=e.template,n._key=e.localStorageKey,n._clearButton=e.clearButton,n._clearButton.onclick=function(){return n.clear()},n._outlet.onclick=function(e){return n._requestUpdate(e.target.innerHTML)},n}return i(t,e),u(t,[{key:"_render",value:function(){this._outlet.innerHTML="";for(var e=document.importNode(this._template.content,!0),t=this._list.length-1;t>=0;t--){var n=e.cloneNode(!0),r=n.querySelector("a");r.innerHTML=this._list[t],r.onclick=function(){return!1},this._outlet.appendChild(n)}}},{key:"add",value:function(e){var t=this._list.indexOf(e);t>=0&&this._list.splice(t,1),this._list.push(e),localStorage[this._key]=JSON.stringify(this._list),this._render()}},{key:"init",value:function(){localStorage[this._key]&&(this._list=JSON.parse(localStorage[this._key]),this._render())}},{key:"clear",value:function(){this._list.length=0,localStorage[this._key]="[]",this._render()}}]),t}(a.Component)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Units=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);t.Units=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.value=localStorage.units||"metric",n._key=e.localStorageKey,n._toggleButton=e.toggleButton,n._outlet=e.toggleButton,n._toggleButton.onclick=function(){return n.toggle()},n}return i(t,e),u(t,[{key:"_render",value:function(){this._outlet.textContent="metric"===this.value?"°C":"°F"}},{key:"init",value:function(){this.value=localStorage[this._key]||"metric",this._render()}},{key:"toggle",value:function(){this.value="metric"===this.value?"imperial":"metric",localStorage[this._key]=this.value,this._render(),this._requestUpdate()}}]),t}(a.Component)},function(e,t){}]);